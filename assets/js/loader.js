!function(){var a=io.connect("localhost"),b=b||{};b.App={init:function(){this.mostRecent(),this.getData()},getData:function(){var b=this;a.on("show",function(a){var c=a.show;$.ajax({url:c,type:"POST",crossDomain:!0,dataType:"jsonp"}).done(function(a){b.renderTemplate(a)})})},renderTemplate:function(a){var b,c=a,d=c.data[0].images.standard_resolution.url,e=c.data[0].images.standard_resolution.width,f=c.data[0].images.standard_resolution.height,g=e/f,h=(c.data[0].tags,c.data[0].created_time),i=c.data[0].link;b=g>1?$("<div class='block wide'><a href='"+i+"'><img src='"+d+"'/></a><div class='instainfos'><p>Posted:"+h+"</p></div></div>"):$("<div class='block'><a href='"+i+"'><img src='"+d+"'/></a><div class='instainfos'><p>Posted:"+h+"</p></div></div>"),$grid.prepend(b).masonry("prepended",b),last=$("#list .block:first-child"),lastSrc=$("#list .block:first-child").find("img").attr("src"),nextSrc=$("#list .block:nth-child(2)").find("img").attr("src"),lastSrc===nextSrc&&$grid.masonry("remove",last),$grid.masonry(),console.log("layoutinsta")},mostRecent:function(){a.on("firstShow",function(a){for(var b=a,c=0,c=0;c<b.firstShow.length&&25>c;c++){var d,e=b.firstShow[c].images.standard_resolution.url,f=b.firstShow[c].images.standard_resolution.width,g=b.firstShow[c].images.standard_resolution.height,h=f/g,i=(b.firstShow[c].tags,b.firstShow[c].created_time),j=b.firstShow[c].link;d=h>1?$("<div class='block wide'><a href='"+j+"'><img src='"+e+"'/></a><div class='instainfos'><p>"+c+"Posted:"+i+"</p></div></div>"):$("<div class='block'><a href='"+j+"'><img src='"+e+"'/></a><div class='instainfos'><p>"+c+"Posted:"+i+"</p></div></div>"),$grid.append(d).masonry("appended",d),console.log(c)}$grid.masonry("layout"),console.log("layout")})}},b.App.init()}(this);